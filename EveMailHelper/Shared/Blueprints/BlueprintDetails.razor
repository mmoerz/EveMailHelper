@using EveMailHelper.ServiceLayer.Models

<MudTable Dense="true"
          Hover="true"
          FixedHeader="true"
          FixedFooter="true"
          ReadOnly="true"
          ServerData=@(new Func<TableState, Task<TableData<BlueprintComponent>>>(ServerReload))
          SortLabel="Sortierung"
          T="BlueprintComponent"
          @ref="_table">
    <ToolBarContent>
        <MudPaper Elevation="0">
            <MudText Typo="Typo.h6">@BlueprintName</MudText>
        </MudPaper>
        @if (_mainPlan != null) {
            <MudPaper Elevation="0" Class="ml-4">
                <MudText>@_mainPlan.ProductQuantity</MudText>
            </MudPaper>
            <MudPaper Elevation="0" Class="ml-4">
                <MudText>@_mainPlan.ProductName </MudText>
            </MudPaper>
        }
    </ToolBarContent>
    <ColGroup>
        <col style="width:220px" />
        <col style="width:120px" />
        <col style="width:100px" />
        <col style="width:120px" />
        <col style="width:120px" />
        <col />
        <col />
    </ColGroup>
    <HeaderContent>
        <MudTh><MudTableSortLabel SortLabel="TypeName" T="Character">Name</MudTableSortLabel> </MudTh>
        <MudTh><MudTableSortLabel SortLabel="Volume" T="Character">Volume</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="Quantity" T="Character">Quantity</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="BPQuantity" T="Character">BPQuantity</MudTableSortLabel></MudTh>
            <MudTh>
                <MudTableSortLabel SortLabel="FQuantity" T="Character">
                    ForcedQuantity
                </MudTableSortLabel>
            </MudTh>
        <MudTh><MudTableSortLabel SortLabel="Price" T="Character">Price per Unit</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="Sum" T="Character">Sum</MudTableSortLabel></MudTh>
            
        <MudTh></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="TypeName">
            <MudPaper Class="@GetClassForDepth(@context.ProductionDepth)" Elevation="0">
                @context.ProductionDepth: @context.Name
            </MudPaper>
        </MudTd>
        <MudTd DataLabel="Volume">
            <MudText Align="Align.Right">@context.VolumeSum</MudText>
        </MudTd>
        <MudTd DataLabel="Quantity">
            <MudText Align="Align.Right">@context.Quantity</MudText>
        </MudTd>
        <MudTd DataLabel="BPQuantity">
            <MudText Align="Align.Right">@context.QuantityFromBlueprint</MudText>
        </MudTd>
        <MudTd DataLabel="FQuantity">
            <MudText Align="Align.Right">@context.ForcedQuantityMultiplier</MudText>
        </MudTd>
        <MudTd DataLabel="Price">
            <MudText Align="Align.Right">@($"{context.PricePerUnit:#,##0.00}")</MudText>
        </MudTd>
        <MudTh DataLabel="Sum">
            <MudText Align="Align.Right" Color="@GetColorForPriceSum(@context)">
                 @($"{context.PriceSum:#,##0.00}")
            </MudText>
        </MudTh>
    </RowTemplate>
    <PagerContent>
            
    </PagerContent>
</MudTable>